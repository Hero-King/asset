import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as e,o as i}from"./app-e59U58JH.js";const l={};function p(d,s){return i(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="samba" tabindex="-1"><a class="header-anchor" href="#samba"><span>Samba</span></a></h1><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p><code> yum install -y samba</code></p><h2 id="配置-参考-etc-samba-smb-conf-example" tabindex="-1"><a class="header-anchor" href="#配置-参考-etc-samba-smb-conf-example"><span>配置（参考/etc/samba/smb.conf.example）</span></a></h2><ul><li><p>samba 服务器使用本机 linux 用户，但是密码是独立管理的，可以先创建 linux 用户或者使用已经存在的用户，设置登录密码<code>smbpasswd -a 用户名</code> 或者使用<code>pdbedit </code></p></li><li><p>主要配置文件 /etc/samba/smb.conf，主配置文件由两部分构成，Global Settings（该设置都是与 Samba 服务整体运行环境有关的选项，它的设置项目是针对所有共享资源的。），Share Definitions（该设置针对的是共享目录个别的设置，只对当前的共享资源起作用。 ）</p><ul><li><p>常用的脚本文件案方面，若分为服务器与客户端功能，则主要有底下这几个数据：</p><p>/usr/sbin/{smbd,nmbd}：服务器功能，就是最重要的权限管理 (smbd) 以及 NetBIOS name 查询 (nmbd) 两个重要的服务程序；</p><p>/usr/bin/{tdbdump,tdbtool}：服务器功能，在 Samba 3.0<br> 以后的版本中，用户的账号与密码参数已经转为使用数据库了！Samba 使用的数据库名称为 TDB (Trivial DataBase)。<br> 既然是使用数据库，当然要使用数据库的控制指令来处理啰。tdbdump 可以察看数据库的内容，tdbtool 则可以进入数据库操作接口直接手动修改帐密参数。不过，你得要安装 tdb-tools 这个软件才行；</p><p>/usr/bin/smbstatus：服务器功能，可以列出目前 Samba 的联机状况， 包括每一条 Samba 联机的 PID, 分享的资源，使用的用户来源等等，让你轻松管理 Samba 啦；</p><p>/usr/bin/{smbpasswd,pdbedit}：服务器功能，在管理 Samba 的用户账号密码时， 早期是使用 smbpasswd 这个指令，不过因为后来使用 TDB 数据库了，因此建议使用新的 pdbedit 指令来管理用户数据；</p><p>/usr/bin/testparm：服务器功能，这个指令主要在检验配置文件 smb.conf 的语法正确与否，当你编辑过 smb.conf<br> 时，请务必使用这个指令来检查一次，避免因为打字错误引起的困扰啊！</p><p>/sbin/mount.cifs：客户端功能，在 Windows 上面我们可以设定『网络驱动器机』来连接到自己的主机上面。在 Linux 上面，我们则是透过 mount (mount.cifs) 来将远程主机分享的档案与目录挂载到自己的 Linux 主机上面哪！</p><p>/usr/bin/smbclient：客户端功能，当你的 Linux 主机想要藉由『网络上的芳邻』的功能来查看别台计算机所分享出来的目录与装置时，就可以使用 smbclient 来查看啦！这个指令也可以使用在自己的 SAMBA 主机上面，用来查看是否设定成功哩！</p><p>/usr/bin/nmblookup：客户端功能，有点类似 nslookup 啦！重点在查出 NetBIOS name 就是了</p><p>/usr/bin/smbtree：客户端功能，这玩意就有点像 Windows<br> 系统的网络上的芳邻显示的结果，可以显示类似『靠近我的计算机』之类的数据， 能够查到工作组与计算机名称的树状目录分布图！</p></li><li><p>全局配置</p></li><li><p>共享目录配置（默认的几个选项，不用可以将注释掉，加入新的）</p><ul><li><p>默认的【Home】选项：共享登录用户的家目录/home/用户名</p></li><li><p>自定义共享目录</p><p>[MyShare]<br> comment = Home xia de samba<br> path = /home/***/samba<br> browseable = yes（未登录之前可以看到目录）<br> writable = yes<br> public = no（不允许匿名登录）<br> valid users = 用户名</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span># See smb.conf.example for a more detailed config file or</span></span>
<span class="line"><span># read the smb.conf manpage.</span></span>
<span class="line"><span># Run &#39;testparm&#39; to verify the config is correct after</span></span>
<span class="line"><span># you modified it.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[global]</span></span>
<span class="line"><span>        workgroup = WORKGROUP</span></span>
<span class="line"><span>        security = user</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        passdb backend = tdbsam</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        log file = /var/log/samba/log.%m</span></span>
<span class="line"><span>        # maximum size of 50KB per log file, then rotate:</span></span>
<span class="line"><span>        max log size = 50</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>        printing = cups</span></span>
<span class="line"><span>        printcap name = cups</span></span>
<span class="line"><span>        load printers = yes</span></span>
<span class="line"><span>        cups options = raw</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 共享linux 家目录选项</span></span>
<span class="line"><span>#[homes]</span></span>
<span class="line"><span>#       comment = Home Directories</span></span>
<span class="line"><span>#       valid users = %S, %D%w%S</span></span>
<span class="line"><span>#       browseable = No</span></span>
<span class="line"><span>#       read only = No</span></span>
<span class="line"><span>#       inherit acls = Yes</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[MyShare]</span></span>
<span class="line"><span>        comment = Home xia de samba</span></span>
<span class="line"><span>        path = /home/wangjunjie/samba</span></span>
<span class="line"><span>        browseable = yes</span></span>
<span class="line"><span>        writable = yes</span></span>
<span class="line"><span>        public = no</span></span>
<span class="line"><span>        valid users = wangjunjie</span></span>
<span class="line"><span>#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li></ul><h2 id="补充说明" tabindex="-1"><a class="header-anchor" href="#补充说明"><span>补充说明：</span></a></h2><ul><li><p>windows 先要访问需要把 config 中群组设置成 WORKGROUP</p></li><li><p>测试服务可用性可以使用</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>yum install -y samba-client</span></span>
<span class="line"><span>smbclient //ip/myshare/ -U user1  # 其中myshare代表共享标志 配置文件中的[MyShare] [homes]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>win7 清除访问 samba 局域网密码缓存<code>control userpasswords2 </code> 然后【高级】/【密码管理】，删掉保存的该机器密码。</p></li><li><p>防火墙开启 139 445</p></li><li><p>查看 samba 服务器中已拥有哪些用户：<code>pdbedit -L</code></p></li><li><p>删除 samba 服务中的某个用户: <code>smbpasswd -x 用户名</code></p></li><li><p>共享目录最好设置权限 777</p></li><li><p>可以使用 docker 部署该服务器，方便但是内存占用高；并不推荐</p></li><li><p>参考博客</p><ul><li><a href="https://blog.csdn.net/weixin_40806910/article/details/81917077" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_40806910/article/details/81917077</a></li><li><a href="https://blog.csdn.net/qq_38410730/article/details/80500920" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_38410730/article/details/80500920</a></li><li><a href="https://www.linuxidc.com/Linux/2018-11/155466.html" target="_blank" rel="noopener noreferrer">https://www.linuxidc.com/Linux/2018-11/155466.html</a></li></ul></li></ul></li></ul>`,7)])])}const m=n(l,[["render",p]]),t=JSON.parse(`{"path":"/software/samba.html","title":"Samba","lang":"zh-CN","frontmatter":{"description":"Samba 安装 yum install -y samba 配置（参考/etc/samba/smb.conf.example） samba 服务器使用本机 linux 用户，但是密码是独立管理的，可以先创建 linux 用户或者使用已经存在的用户，设置登录密码smbpasswd -a 用户名 或者使用pdbedit 主要配置文件 /etc/samba/...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Samba\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-21T14:02:37.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"HeroKing\\",\\"url\\":\\"https://github.com/Hero-King\\",\\"email\\":\\"838774057@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://blog.heroking.top/software/samba.html"}],["meta",{"property":"og:site_name","content":"HeroKing博客"}],["meta",{"property":"og:title","content":"Samba"}],["meta",{"property":"og:description","content":"Samba 安装 yum install -y samba 配置（参考/etc/samba/smb.conf.example） samba 服务器使用本机 linux 用户，但是密码是独立管理的，可以先创建 linux 用户或者使用已经存在的用户，设置登录密码smbpasswd -a 用户名 或者使用pdbedit 主要配置文件 /etc/samba/..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-21T14:02:37.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-21T14:02:37.000Z"}]]},"git":{"createdTime":1758463357000,"updatedTime":1758463357000,"contributors":[{"name":"HeroKingMini","username":"HeroKingMini","email":"838774057@qq.com","commits":1,"url":"https://github.com/HeroKingMini"}]},"readingTime":{"minutes":3.79,"words":1137},"filePathRelative":"software/samba.md","excerpt":"\\n<h2>安装</h2>\\n<p><code> yum install -y samba</code></p>\\n<h2>配置（参考/etc/samba/smb.conf.example）</h2>\\n<ul>\\n<li>\\n<p>samba 服务器使用本机 linux 用户，但是密码是独立管理的，可以先创建 linux 用户或者使用已经存在的用户，设置登录密码<code>smbpasswd -a 用户名</code> 或者使用<code>pdbedit </code></p>\\n</li>\\n<li>\\n<p>主要配置文件 /etc/samba/smb.conf，主配置文件由两部分构成，Global Settings（该设置都是与 Samba 服务整体运行环境有关的选项，它的设置项目是针对所有共享资源的。），Share Definitions（该设置针对的是共享目录个别的设置，只对当前的共享资源起作用。 ）</p>\\n<ul>\\n<li>\\n<p>常用的脚本文件案方面，若分为服务器与客户端功能，则主要有底下这几个数据：</p>\\n<p>/usr/sbin/{smbd,nmbd}：服务器功能，就是最重要的权限管理 (smbd) 以及 NetBIOS name 查询 (nmbd) 两个重要的服务程序；</p>\\n<p>/usr/bin/{tdbdump,tdbtool}：服务器功能，在 Samba 3.0<br>\\n以后的版本中，用户的账号与密码参数已经转为使用数据库了！Samba 使用的数据库名称为 TDB (Trivial DataBase)。<br>\\n既然是使用数据库，当然要使用数据库的控制指令来处理啰。tdbdump 可以察看数据库的内容，tdbtool 则可以进入数据库操作接口直接手动修改帐密参数。不过，你得要安装 tdb-tools 这个软件才行；</p>\\n<p>/usr/bin/smbstatus：服务器功能，可以列出目前 Samba 的联机状况， 包括每一条 Samba 联机的 PID, 分享的资源，使用的用户来源等等，让你轻松管理 Samba 啦；</p>\\n<p>/usr/bin/{smbpasswd,pdbedit}：服务器功能，在管理 Samba 的用户账号密码时， 早期是使用 smbpasswd 这个指令，不过因为后来使用 TDB 数据库了，因此建议使用新的 pdbedit 指令来管理用户数据；</p>\\n<p>/usr/bin/testparm：服务器功能，这个指令主要在检验配置文件 smb.conf 的语法正确与否，当你编辑过 smb.conf<br>\\n时，请务必使用这个指令来检查一次，避免因为打字错误引起的困扰啊！</p>\\n<p>/sbin/mount.cifs：客户端功能，在 Windows 上面我们可以设定『网络驱动器机』来连接到自己的主机上面。在 Linux 上面，我们则是透过 mount (mount.cifs) 来将远程主机分享的档案与目录挂载到自己的 Linux 主机上面哪！</p>\\n<p>/usr/bin/smbclient：客户端功能，当你的 Linux 主机想要藉由『网络上的芳邻』的功能来查看别台计算机所分享出来的目录与装置时，就可以使用 smbclient 来查看啦！这个指令也可以使用在自己的 SAMBA 主机上面，用来查看是否设定成功哩！</p>\\n<p>/usr/bin/nmblookup：客户端功能，有点类似 nslookup 啦！重点在查出 NetBIOS name 就是了</p>\\n<p>/usr/bin/smbtree：客户端功能，这玩意就有点像 Windows<br>\\n系统的网络上的芳邻显示的结果，可以显示类似『靠近我的计算机』之类的数据， 能够查到工作组与计算机名称的树状目录分布图！</p>\\n</li>\\n<li>\\n<p>全局配置</p>\\n</li>\\n<li>\\n<p>共享目录配置（默认的几个选项，不用可以将注释掉，加入新的）</p>\\n<ul>\\n<li>\\n<p>默认的【Home】选项：共享登录用户的家目录/home/用户名</p>\\n</li>\\n<li>\\n<p>自定义共享目录</p>\\n<p>[MyShare]<br>\\ncomment = Home xia de samba<br>\\npath = /home/***/samba<br>\\nbrowseable = yes（未登录之前可以看到目录）<br>\\nwritable = yes<br>\\npublic = no（不允许匿名登录）<br>\\nvalid users = 用户名</p>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-\\"><span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span># See smb.conf.example for a more detailed config file or</span></span>\\n<span class=\\"line\\"><span># read the smb.conf manpage.</span></span>\\n<span class=\\"line\\"><span># Run 'testparm' to verify the config is correct after</span></span>\\n<span class=\\"line\\"><span># you modified it.</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>[global]</span></span>\\n<span class=\\"line\\"><span>        workgroup = WORKGROUP</span></span>\\n<span class=\\"line\\"><span>        security = user</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        passdb backend = tdbsam</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        log file = /var/log/samba/log.%m</span></span>\\n<span class=\\"line\\"><span>        # maximum size of 50KB per log file, then rotate:</span></span>\\n<span class=\\"line\\"><span>        max log size = 50</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        printing = cups</span></span>\\n<span class=\\"line\\"><span>        printcap name = cups</span></span>\\n<span class=\\"line\\"><span>        load printers = yes</span></span>\\n<span class=\\"line\\"><span>        cups options = raw</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span># 共享linux 家目录选项</span></span>\\n<span class=\\"line\\"><span>#[homes]</span></span>\\n<span class=\\"line\\"><span>#       comment = Home Directories</span></span>\\n<span class=\\"line\\"><span>#       valid users = %S, %D%w%S</span></span>\\n<span class=\\"line\\"><span>#       browseable = No</span></span>\\n<span class=\\"line\\"><span>#       read only = No</span></span>\\n<span class=\\"line\\"><span>#       inherit acls = Yes</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>[MyShare]</span></span>\\n<span class=\\"line\\"><span>        comment = Home xia de samba</span></span>\\n<span class=\\"line\\"><span>        path = /home/wangjunjie/samba</span></span>\\n<span class=\\"line\\"><span>        browseable = yes</span></span>\\n<span class=\\"line\\"><span>        writable = yes</span></span>\\n<span class=\\"line\\"><span>        public = no</span></span>\\n<span class=\\"line\\"><span>        valid users = wangjunjie</span></span>\\n<span class=\\"line\\"><span>#</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n</ul>\\n</li>\\n</ul>\\n</li>\\n</ul>","autoDesc":true}`);export{m as comp,t as data};
