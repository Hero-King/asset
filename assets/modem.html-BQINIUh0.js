import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,b as n,o as r}from"./app-B_bvwj15.js";const p={};function o(h,e){return r(),t("div",null,[...e[0]||(e[0]=[n('<h1 id="光猫" tabindex="-1"><a class="header-anchor" href="#光猫"><span>光猫</span></a></h1><h2 id="家庭宽带" tabindex="-1"><a class="header-anchor" href="#家庭宽带"><span>家庭宽带</span></a></h2><p>网速跑满为 600Mb 下载, 60~100Mb 上传速度</p><h2 id="vlan" tabindex="-1"><a class="header-anchor" href="#vlan"><span>Vlan</span></a></h2><p>虚拟局域网（VLAN）。它的功能是<code>将连接到同一交换机的主机划分成更小的逻辑网段，从而减少广播的数量</code>。不同的 VLAN 之间无法通信，因此广播仅限于同一服务需求主机的 VLAN。即使它们连接到同一个交换机，不同的 VLAN 也不会接收 ARP 广播请求！如果他们需要相互通信，他们只能使用路由器或第三层交换机</p><p>数据流向,五口交换机中给端口绑定 vlanid,那么端口就会流通该 vlan 的数据,同时端口配置<code>已标记/未标记</code> 表示流入和流出数据是否需要打标签</p><h2 id="trunk" tabindex="-1"><a class="header-anchor" href="#trunk"><span>trunk</span></a></h2><p>TRUNK 是端口汇聚的意思，就是通过配置软件的设置，将 2 个或多个物理端口组合在一起成为一条逻辑的路径从而增加在交换机和网络节点之间的带宽，将属于这几个端口的带宽合并，给端口提供一个几倍于独立端口的独享的高带宽。Trunk 是一种封装技术，它是一条点到点的链路，链路的两端可以都是交换机，也可以是交换机和路由器，还可以是主机和交换机或路由器。</p><p>TRUNK 的主要功能就是将多个物理端口（一般为 2－8 个）绑定为一个逻辑的通道，使其工作起来就像一个通道一样。将多个物理链路捆绑在一起后，不但提升了整个网络的带宽，而且数据还可以同时经由被绑定的多个物理链路传输，具有链路冗余的作用，在网络出现故障或其他原因断开其中一条或多条链路时，剩下的链路还可以工作。</p><p>TRUNK 的作用 ：<br> （1）传输 vlan 的作用。一条 trunk 线路可以承载多个 Vlan 数据<br> （2）数据在 trunk 链路上传输要打标签，数据在离开 trunk 链路时要脱标签<br> （3）通过 trunk 的标签可以区分不同的流量。<br> （4）注意：trunk 工作在数据链路层（只能识别 mac 地址），不能实现不同 vlan 之间的通信</p><h2 id="使用-trunk-单线复用宽带和-iptv" tabindex="-1"><a class="header-anchor" href="#使用-trunk-单线复用宽带和-iptv"><span>使用 trunk 单线复用宽带和 iptv</span></a></h2><p>适用于客厅和弱电箱只有一根网线情况</p><p>我们知道光猫通过一根光纤就可以给用户提供 IPTV、宽带、电话等业务，那我们能不能使用一个网线同时给客厅的路由器提供 iptv 和宽带的业务呢?</p><p>答案是可以的!! 首先我们看两个网线情况: 一根接路由器 wan 口,光猫 iptv LAN 口 接 iptv 机顶盒是肯定没问题的,那为什么会出现同是 Lan 口业务不同的情况呢? 主要是光猫业务连接中可以绑定不同的 LAN 口.</p><p>接下来我们讨论单线复用实现宽带和 iptv, 需要光猫和下级路由器支持 trunk 功能,这样我们划分好两个业务的 Vlan, 就可以在一条线上传递两组 vlan 数据,然后在路由器中 untag vlan 数据,绑定某个 lan 口就可以了</p><h2 id="nat-模式-路由模式-全路由模式" tabindex="-1"><a class="header-anchor" href="#nat-模式-路由模式-全路由模式"><span>NAT 模式/路由模式/全路由模式</span></a></h2><p>NAT 模式。此模式下，由局域网向广域网发送的数据包默认经过 NAT 转换，但路由器对所有源地址与局域网接口不在同一网段的数据包均不进行处理。例如，路由器 LAN 口 IP 设置为 192.168.1.1，子网掩码为 255.255.255.0，LAN 口所处网段为 192.168.1.0/24，此时，路由器收到源地址为 192.168.1.123 的数据包会进行 NAT 转换；但如果收到源地址为 20.31.76.80 的数据包则直接丢弃。</p><p>路由模式。此模式下，处于不同网段的主机可以通过相应的路由设置进行通信，但路由器不进行 NAT 转换。例如，当路由器 DMZ 口处于广域网模式时，DMZ 区域内主机需要以路由方式访问广域网中的服务器，若静态路由规则允许，则可正常通信。此时，局域网内的主机不能访问广域网。</p><p>全路由模式。全模式包含了 NAT 模式及路由模式，此模式下，路由器首先对符合 NAT 转发条件的数据包进行 NAT 转换；若不符合，则进行静态路由规则匹配，匹配成功的数据包以路由模式进行转发；匹配失败的数据包直接丢弃。这样，路由器既允许数据包进行 NAT 转换，也不阻隔与接口在不同网段的数据包。</p><h2 id="桥接" tabindex="-1"><a class="header-anchor" href="#桥接"><span>桥接</span></a></h2><ol><li>取消 hdcp 使能或者关闭 dhcp 服务器</li><li>记录好 Internet 连接和 iptv 连接 vlanid</li><li>internet 业务改成桥接</li></ol><h2 id="vlan-绑定" tabindex="-1"><a class="header-anchor" href="#vlan-绑定"><span>vlan 绑定</span></a></h2><p>选择好连接和绑定的某个端口, 输入用户侧 vlanid(写法是出口 vlanid/上层业务 vlanid); 然后在路由器上使用对应的 vlanid 接受数据<br><code>vlan绑定端口1后系统会自动取消网络连接中的业务到端口1的绑定</code></p><h2 id="光猫交换机功能-省掉弱电箱中的交换机" tabindex="-1"><a class="header-anchor" href="#光猫交换机功能-省掉弱电箱中的交换机"><span>光猫交换机功能(省掉弱电箱中的交换机)</span></a></h2><p>将光猫不需要的几个端口绑定到一起, 主路由有线回程到某一个不需要的端口</p><h2 id="单臂路由" tabindex="-1"><a class="header-anchor" href="#单臂路由"><span>单臂路由</span></a></h2><p>光猫 Internet 业务取消所有端口绑定, (设置 lan1 口 vlan 绑定 不设置也正常运行)<br> 只有一个网口时刷机 openwrt 系统, 默认只有一个 lan 口,只需要按照如下操作, 可以在 op 和光猫中间添加 ap 设备(华为路由器有问题, 可以使用老毛子;op 固件 ap 模式, 网线都插在 路由器的 Lan 口)提供无线的功能</p><ul><li>关闭 lan 口的桥接</li><li>设置 lan 口物理设备 eth0</li><li>新建 wan 口物理设备 eth0 用于宽带拨号</li><li>与 openwrt 连接的设备关闭 dhcp 服务, op 的 dhcp 服务勾选强制</li></ul><blockquote><p>参考资料</p><p><a href="https://www.right.com.cn/forum/thread-5768047-1-1.html" target="_blank" rel="noopener noreferrer">https://www.right.com.cn/forum/thread-5768047-1-1.html</a><br><a href="https://www.right.com.cn/FORUM/thread-6196997-1-1.html" target="_blank" rel="noopener noreferrer">https://www.right.com.cn/FORUM/thread-6196997-1-1.html</a><br><a href="https://www.right.com.cn/forum/thread-4066357-1-1.html" target="_blank" rel="noopener noreferrer">https://www.right.com.cn/forum/thread-4066357-1-1.html</a></p></blockquote><h2 id="资料" tabindex="-1"><a class="header-anchor" href="#资料"><span>资料</span></a></h2><p><a href="https://zhuanlan.zhihu.com/p/450698488" target="_blank" rel="noopener noreferrer">光猫配置教程</a></p>',31)])])}const c=a(p,[["render",o]]),d=JSON.parse('{"path":"/network/modem.html","title":"光猫","lang":"zh-CN","frontmatter":{"description":"光猫 家庭宽带 网速跑满为 600Mb 下载, 60~100Mb 上传速度 Vlan 虚拟局域网（VLAN）。它的功能是将连接到同一交换机的主机划分成更小的逻辑网段，从而减少广播的数量。不同的 VLAN 之间无法通信，因此广播仅限于同一服务需求主机的 VLAN。即使它们连接到同一个交换机，不同的 VLAN 也不会接收 ARP 广播请求！如果他们需要相互...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"光猫\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-22T15:59:37.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"HeroKing\\",\\"url\\":\\"https://github.com/Hero-King\\",\\"email\\":\\"838774057@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://blog.heroking.top/network/modem.html"}],["meta",{"property":"og:site_name","content":"HeroKing博客"}],["meta",{"property":"og:title","content":"光猫"}],["meta",{"property":"og:description","content":"光猫 家庭宽带 网速跑满为 600Mb 下载, 60~100Mb 上传速度 Vlan 虚拟局域网（VLAN）。它的功能是将连接到同一交换机的主机划分成更小的逻辑网段，从而减少广播的数量。不同的 VLAN 之间无法通信，因此广播仅限于同一服务需求主机的 VLAN。即使它们连接到同一个交换机，不同的 VLAN 也不会接收 ARP 广播请求！如果他们需要相互..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-22T15:59:37.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-22T15:59:37.000Z"}]]},"git":{"createdTime":1758556777000,"updatedTime":1758556777000,"contributors":[{"name":"HeroKing-web","username":"HeroKing-web","email":"838774057@qq.com","commits":1,"url":"https://github.com/HeroKing-web"}]},"readingTime":{"minutes":5.24,"words":1571},"filePathRelative":"network/modem.md","excerpt":"\\n<h2>家庭宽带</h2>\\n<p>网速跑满为 600Mb 下载, 60~100Mb 上传速度</p>\\n<h2>Vlan</h2>\\n<p>虚拟局域网（VLAN）。它的功能是<code>将连接到同一交换机的主机划分成更小的逻辑网段，从而减少广播的数量</code>。不同的 VLAN 之间无法通信，因此广播仅限于同一服务需求主机的 VLAN。即使它们连接到同一个交换机，不同的 VLAN 也不会接收 ARP 广播请求！如果他们需要相互通信，他们只能使用路由器或第三层交换机</p>\\n<p>数据流向,五口交换机中给端口绑定 vlanid,那么端口就会流通该 vlan 的数据,同时端口配置<code>已标记/未标记</code> 表示流入和流出数据是否需要打标签</p>","autoDesc":true}');export{c as comp,d as data};
